{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\RN\\\\client\\\\components\\\\Chat.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useRef, useEffect, useLayoutEffect } from \"react\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport axios from \"axios\";\nimport { Con, SafeCon } from \"../assets/common/common\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { CardAnimationContext, createStackNavigator, CardStyleInterpolators } from \"@react-navigation/stack\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { ScrollView } from \"react-native-gesture-handler\";\nimport { timeForToday } from \"../assets/helper/timeHelper\";\nimport Port from \"./Port\";\n\nvar ChatList = function ChatList(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      chatRoom = _useState2[0],\n      setChatRoom = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      msgList = _useState4[0],\n      setMsgList = _useState4[1];\n\n  var userWidth = Dimensions.get(\"window\").width;\n  useEffect(function () {\n    var keyBoardShow = function keyBoardShow() {};\n\n    var keyBoardHide = function keyBoardHide() {};\n\n    Keyboard.addListener(\"keyboardDidShow\", keyBoardShow);\n    Keyboard.addListener(\"keyboardDidHide\", keyBoardHide);\n    axios({\n      method: \"get\",\n      url: Port + \"/getChatRoom\",\n      params: {\n        seq: 1\n      }\n    }).then(function (_ref2) {\n      var data = _ref2.data,\n          status = _ref2.status;\n      if (status === 200) setChatRoom(data);\n    }).catch(function (e) {\n      return alert(e);\n    });\n  }, [msgList]);\n  return React.createElement(ScrollView, {\n    style: {\n      backgroundColor: \"#161616\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, chatRoom && chatRoom.map(function (val, idx) {\n    return React.createElement(TouchableOpacity, {\n      key: val.seq,\n      onPress: function onPress() {\n        return navigation.navigate(\"ChatDetail\", {\n          val: val,\n          setMsgList: setMsgList\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }\n    }, React.createElement(View, {\n      style: {\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 15\n      }\n    }, React.createElement(View, {\n      style: {\n        marginTop: 15,\n        flexDirection: \"row\",\n        padding: 15,\n        backgroundColor: \"#353535\",\n        width: userWidth - 40,\n        alignItems: \"center\",\n        borderRadius: 12\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }, React.createElement(Image, {\n      style: {\n        width: 60,\n        height: 60,\n        borderRadius: 50\n      },\n      source: {\n        uri: \"https://file.mk.co.kr/meet/neds/2021/04/image_readtop_2021_330747_16177500644599916.jpg\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 19\n      }\n    }), React.createElement(View, {\n      style: {\n        marginLeft: 12,\n        justifyContent: \"space-around\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 19\n      }\n    }, React.createElement(View, {\n      style: {\n        flexDirection: \"row\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }\n    }, React.createElement(Text, {\n      style: {\n        fontSize: 13,\n        color: \"#4caf50\",\n        fontWeight: \"bold\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 23\n      }\n    }, val.title), React.createElement(Text, {\n      style: {\n        fontSize: 12,\n        color: \"#9e9e9e\",\n        marginLeft: 6\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 23\n      }\n    }, timeForToday(val.reg_date))), React.createElement(View, {\n      style: {\n        width: userWidth - 100\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }\n    }, React.createElement(Text, {\n      style: {\n        flexWrap: \"wrap\",\n        color: \"white\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 23\n      }\n    }, val.msg))))));\n  }));\n};\n\nvar ChatDetail = function ChatDetail(_ref3) {\n  var _route$params;\n\n  var route = _ref3.route,\n      navigation = _ref3.navigation;\n  var val = route.params.val;\n  var setParentMsgList = route == null ? void 0 : (_route$params = route.params) == null ? void 0 : _route$params.setMsgList;\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      msgList = _useState6[0],\n      setMsgList = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      inputMsg = _useState8[0],\n      setInputMsg = _useState8[1];\n\n  var loginUserNo = 2;\n  var userWidth = Dimensions.get(\"window\").width;\n  var scrollViewRef = useRef();\n  var inputRef = useRef();\n  useEffect(function () {\n    axios({\n      method: \"get\",\n      url: Port + \"/getChatMsg\",\n      params: {\n        room_seq: val.room_seq\n      }\n    }).then(function (_ref4) {\n      var data = _ref4.data,\n          status = _ref4.status;\n      if (status === 200) setMsgList(data);\n    }).catch(function (e) {\n      alert(e);\n    });\n  }, []);\n\n  var saveMsg = function saveMsg() {\n    return _regeneratorRuntime.async(function saveMsg$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!((inputMsg == null ? void 0 : inputMsg.length) === 0)) {\n              _context.next = 3;\n              break;\n            }\n\n            alert(\"메시지를 입력해주세요.\");\n            return _context.abrupt(\"return\");\n\n          case 3:\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(axios({\n              method: \"get\",\n              url: Port + \"/getInsertMsg\",\n              params: {\n                msg: inputMsg,\n                roomSeq: val.room_seq,\n                sendUser: loginUserNo,\n                receiveUser: val.receive_user,\n                isRead: val.isRead\n              }\n            }).then(function (_ref5) {\n              var data = _ref5.data,\n                  status = _ref5.status;\n\n              if (status === 200) {\n                realSaveMsg(val, data.insertId);\n              } else {\n                alert(\"에러\");\n              }\n            }).catch(function (e) {\n              return alert(e);\n            }));\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var realSaveMsg = function realSaveMsg(val, insertId) {\n    var now = new Date();\n    var msg = {\n      is_read: \"N\",\n      msg: inputMsg,\n      receive_user: val.receive_user,\n      receive_user_name: val.receive_user_name,\n      reg_date: val.reg_date,\n      room_seq: val.room_seq,\n      send_user: loginUserNo,\n      send_user_name: val.send_user_name,\n      seq: insertId,\n      title: val.title\n    };\n\n    var cloneList = _toConsumableArray(msgList);\n\n    cloneList.push(msg);\n    setMsgList(cloneList);\n    setInputMsg(\"\");\n    setParentMsgList(now.getTime());\n  };\n\n  return React.createElement(Con, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 5\n    }\n  }, React.createElement(ScrollView, {\n    ref: scrollViewRef,\n    onContentSizeChange: function onContentSizeChange() {\n      return scrollViewRef.current.scrollToEnd({\n        animated: true\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }\n  }, msgList && msgList.map(function (val, idx) {\n    return React.createElement(View, {\n      key: val.seq,\n      style: {\n        flexDirection: \"row\",\n        padding: 15\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 15\n      }\n    }, loginUserNo === val.send_user ? React.createElement(View, {\n      style: {\n        flex: 1,\n        flexDirection: \"row\",\n        justifyContent: \"flex-end\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 19\n      }\n    }, React.createElement(View, {\n      style: {\n        backgroundColor: \"#a5d6a7\",\n        borderRadius: 12,\n        marginRight: 12,\n        padding: 12\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 21\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"black\",\n        flexWrap: \"wrap\",\n        maxWidth: userWidth - 150\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 23\n      }\n    }, val.msg)), React.createElement(Image, {\n      style: {\n        width: 50,\n        height: 50,\n        borderRadius: 50\n      },\n      source: {\n        uri: \"https://cloudfront-ap-northeast-1.images.arcpublishing.com/chosun/GRUY3S3TLKVUE5O2IR7OKFK4O4.jpg\"\n      },\n      alt: \"\\uAC8C\\uC2A4\\uD2B8\\uC0AC\\uC9C4\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 21\n      }\n    })) : React.createElement(View, {\n      style: {\n        flex: 1,\n        flexDirection: \"row\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 19\n      }\n    }, React.createElement(Image, {\n      style: {\n        width: 50,\n        height: 50,\n        borderRadius: 50\n      },\n      source: {\n        uri: \"https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F2438573358070C1535\"\n      },\n      alt: \"\\uC0AC\\uC7A5\\uB2D8\\uC0AC\\uC9C4\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 21\n      }\n    }), React.createElement(View, {\n      style: {\n        backgroundColor: \"#424242\",\n        borderRadius: 12,\n        marginLeft: 12,\n        padding: 12\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 21\n      }\n    }, val.img_uri == \"\" ? null : React.createElement(Image, {\n      style: {\n        width: userWidth - 150,\n        height: userWidth - 150,\n        marginBottom: 10\n      },\n      source: {\n        uri: val.img_uri\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 25\n      }\n    }), React.createElement(Text, {\n      style: {\n        color: \"white\",\n        flexWrap: \"wrap\",\n        maxWidth: userWidth - 150\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 23\n      }\n    }, val.msg))));\n  })), React.createElement(View, {\n    style: {\n      height: 60\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: {\n      position: \"absolute\",\n      height: 60,\n      bottom: 0,\n      width: userWidth,\n      justifyContent: \"center\",\n      padding: 12,\n      backgroundColor: \"#424242\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: {\n      flexDirection: \"row\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 9\n    }\n  }, React.createElement(TextInput, {\n    onChangeText: function onChangeText(text) {\n      setInputMsg(text);\n    },\n    ref: inputRef,\n    placeholder: \"\\uBA54\\uC2DC\\uC9C0\",\n    value: inputMsg,\n    placeholderTextColor: \"#ffffff\",\n    fontSize: 15,\n    style: {\n      color: \"white\",\n      width: userWidth - 70\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 11\n    }\n  }), React.createElement(TouchableOpacity, {\n    onPress: saveMsg,\n    style: {\n      padding: 12,\n      backgroundColor: \"white\",\n      borderRadius: 6\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 13\n    }\n  }, \"\\uC804\\uC1A1\")))));\n};\n\nvar Stack = createStackNavigator();\n\nvar Chat = function Chat(_ref6) {\n  var route = _ref6.route,\n      navigation = _ref6.navigation;\n  var navigationState = navigation.getState();\n  useLayoutEffect(function () {\n    var _navigationState$rout, _navigationState$rout2;\n\n    var isDetail = (navigationState == null ? void 0 : (_navigationState$rout = navigationState.routes[2]) == null ? void 0 : (_navigationState$rout2 = _navigationState$rout.state) == null ? void 0 : _navigationState$rout2.index) === 1 ? \"none\" : null;\n    navigation.setOptions({\n      tabBarStyle: {\n        display: isDetail\n      }\n    });\n  }, [navigationState]);\n  var config = {\n    animation: \"spring\",\n    config: {\n      stiffness: 1000,\n      damping: 500,\n      mass: 3,\n      overshootClamping: true,\n      restDisplacementThreshold: 0.01,\n      restSpeedThreshold: 0.01\n    }\n  };\n  return React.createElement(Stack.Navigator, {\n    screenOptions: {\n      headerShown: false,\n      cardStyleInterpolator: CardStyleInterpolators.forModalPresentationIOS\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 5\n    }\n  }, React.createElement(Stack.Screen, {\n    name: \"ChatList\",\n    component: ChatList,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 7\n    }\n  }), React.createElement(Stack.Screen, {\n    name: \"ChatDetail\",\n    options: {\n      transitionSpec: {\n        open: config,\n        close: config\n      }\n    },\n    component: ChatDetail,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Chat;","map":{"version":3,"sources":["C:/RN/client/components/Chat.js"],"names":["React","useState","useRef","useEffect","useLayoutEffect","axios","Con","SafeCon","SafeAreaView","CardAnimationContext","createStackNavigator","CardStyleInterpolators","NavigationContainer","ScrollView","timeForToday","Port","ChatList","route","navigation","chatRoom","setChatRoom","msgList","setMsgList","userWidth","Dimensions","get","width","keyBoardShow","keyBoardHide","Keyboard","addListener","method","url","params","seq","then","data","status","catch","e","alert","backgroundColor","map","val","idx","navigate","justifyContent","alignItems","marginTop","flexDirection","padding","borderRadius","height","uri","marginLeft","fontSize","color","fontWeight","title","reg_date","flexWrap","msg","ChatDetail","setParentMsgList","inputMsg","setInputMsg","loginUserNo","scrollViewRef","inputRef","room_seq","saveMsg","length","roomSeq","sendUser","receiveUser","receive_user","isRead","realSaveMsg","insertId","now","Date","is_read","receive_user_name","send_user","send_user_name","cloneList","push","getTime","current","scrollToEnd","animated","flex","marginRight","maxWidth","img_uri","marginBottom","position","bottom","text","Stack","Chat","navigationState","getState","isDetail","routes","state","index","setOptions","tabBarStyle","display","config","animation","stiffness","damping","mass","overshootClamping","restDisplacementThreshold","restSpeedThreshold","headerShown","cardStyleInterpolator","forModalPresentationIOS","transitionSpec","open","close"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect, useLayoutEffect } from \"react\";\r\nimport {\r\n  Keyboard,\r\n  View,\r\n  Text,\r\n  TouchableOpacity,\r\n  Image,\r\n  TextInput,\r\n  Dimensions,\r\n  Button,\r\n} from \"react-native\";\r\nimport axios from \"axios\";\r\nimport { Con, SafeCon } from \"../assets/common/common\";\r\nimport { SafeAreaView } from \"react-native-safe-area-context\";\r\nimport {\r\n  CardAnimationContext,\r\n  createStackNavigator,\r\n  CardStyleInterpolators,\r\n} from \"@react-navigation/stack\";\r\nimport { NavigationContainer } from \"@react-navigation/native\";\r\nimport { ScrollView } from \"react-native-gesture-handler\";\r\nimport { timeForToday } from \"../assets/helper/timeHelper\";\r\nimport Port from \"./Port\";\r\n\r\nconst ChatList = ({ route, navigation }) => {\r\n  const [chatRoom, setChatRoom] = useState();\r\n  const [msgList, setMsgList] = useState();\r\n  const userWidth = Dimensions.get(\"window\").width;\r\n\r\n  useEffect(() => {\r\n    const keyBoardShow = () => {\r\n      // alert(\"keyboard show\");\r\n    };\r\n    const keyBoardHide = () => {\r\n      // alert(\"keyboard Hide\");\r\n    };\r\n\r\n    Keyboard.addListener(\"keyboardDidShow\", keyBoardShow);\r\n    Keyboard.addListener(\"keyboardDidHide\", keyBoardHide);\r\n\r\n    axios({\r\n      method: \"get\",\r\n      url: `${Port}/getChatRoom`,\r\n      params: {\r\n        seq: 1,\r\n      },\r\n    })\r\n      .then(({ data, status }) => {\r\n        if (status === 200) setChatRoom(data);\r\n      })\r\n      .catch((e) => alert(e));\r\n  }, [msgList]);\r\n\r\n  return (\r\n    <ScrollView style={{ backgroundColor: \"#161616\" }}>\r\n      {chatRoom &&\r\n        chatRoom.map((val, idx) => {\r\n          return (\r\n            <TouchableOpacity\r\n              key={val.seq}\r\n              onPress={() =>\r\n                navigation.navigate(\"ChatDetail\", {\r\n                  val,\r\n                  setMsgList,\r\n                })\r\n              }\r\n            >\r\n              <View style={{ justifyContent: \"center\", alignItems: \"center\" }}>\r\n                <View\r\n                  style={{\r\n                    marginTop: 15,\r\n                    flexDirection: \"row\",\r\n                    padding: 15,\r\n                    backgroundColor: \"#353535\",\r\n                    width: userWidth - 40,\r\n                    alignItems: \"center\",\r\n                    borderRadius: 12,\r\n                  }}\r\n                >\r\n                  <Image\r\n                    style={{ width: 60, height: 60, borderRadius: 50 }}\r\n                    source={{\r\n                      uri: \"https://file.mk.co.kr/meet/neds/2021/04/image_readtop_2021_330747_16177500644599916.jpg\",\r\n                    }}\r\n                  />\r\n                  <View\r\n                    style={{\r\n                      marginLeft: 12,\r\n                      justifyContent: \"space-around\",\r\n                    }}\r\n                  >\r\n                    <View style={{ flexDirection: \"row\" }}>\r\n                      <Text\r\n                        style={{\r\n                          fontSize: 13,\r\n                          color: \"#4caf50\",\r\n                          fontWeight: \"bold\",\r\n                        }}\r\n                      >\r\n                        {val.title}\r\n                      </Text>\r\n                      <Text\r\n                        style={{\r\n                          fontSize: 12,\r\n                          color: \"#9e9e9e\",\r\n                          marginLeft: 6,\r\n                        }}\r\n                      >\r\n                        {timeForToday(val.reg_date)}\r\n                      </Text>\r\n                    </View>\r\n                    <View style={{ width: userWidth - 100 }}>\r\n                      <Text\r\n                        style={{\r\n                          flexWrap: \"wrap\",\r\n                          color: \"white\",\r\n                        }}\r\n                      >\r\n                        {val.msg}\r\n                      </Text>\r\n                    </View>\r\n                  </View>\r\n                </View>\r\n              </View>\r\n            </TouchableOpacity>\r\n          );\r\n        })}\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst ChatDetail = ({ route, navigation }) => {\r\n  const val = route.params.val;\r\n  const setParentMsgList = route?.params?.setMsgList;\r\n  const [msgList, setMsgList] = useState();\r\n  const [inputMsg, setInputMsg] = useState();\r\n  const loginUserNo = 2;\r\n  const userWidth = Dimensions.get(\"window\").width;\r\n  const scrollViewRef = useRef();\r\n  const inputRef = useRef();\r\n\r\n  useEffect(() => {\r\n    axios({\r\n      method: \"get\",\r\n      url: `${Port}/getChatMsg`,\r\n      params: { room_seq: val.room_seq },\r\n    })\r\n      .then(({ data, status }) => {\r\n        if (status === 200) setMsgList(data);\r\n      })\r\n      .catch((e) => {\r\n        alert(e);\r\n      });\r\n  }, []);\r\n\r\n  const saveMsg = async () => {\r\n    if (inputMsg?.length === 0) {\r\n      alert(\"메시지를 입력해주세요.\");\r\n      return;\r\n    }\r\n\r\n    await axios({\r\n      method: \"get\",\r\n      url: `${Port}/getInsertMsg`,\r\n      params: {\r\n        msg: inputMsg,\r\n        roomSeq: val.room_seq,\r\n        sendUser: loginUserNo,\r\n        receiveUser: val.receive_user,\r\n        isRead: val.isRead,\r\n      },\r\n    })\r\n      .then(({ data, status }) => {\r\n        if (status === 200) {\r\n          realSaveMsg(val, data.insertId);\r\n        } else {\r\n          alert(\"에러\");\r\n        }\r\n      })\r\n      .catch((e) => alert(e));\r\n  };\r\n\r\n  const realSaveMsg = (val, insertId) => {\r\n    const now = new Date();\r\n    const msg = {\r\n      is_read: \"N\",\r\n      msg: inputMsg,\r\n      receive_user: val.receive_user,\r\n      receive_user_name: val.receive_user_name,\r\n      reg_date: val.reg_date,\r\n      room_seq: val.room_seq,\r\n      send_user: loginUserNo,\r\n      send_user_name: val.send_user_name,\r\n      seq: insertId,\r\n      title: val.title,\r\n    };\r\n\r\n    const cloneList = [...msgList];\r\n    cloneList.push(msg);\r\n    setMsgList(cloneList);\r\n    setInputMsg(\"\");\r\n    setParentMsgList(now.getTime());\r\n  };\r\n\r\n  return (\r\n    <Con>\r\n      <ScrollView\r\n        ref={scrollViewRef}\r\n        onContentSizeChange={() =>\r\n          scrollViewRef.current.scrollToEnd({ animated: true })\r\n        }\r\n      >\r\n        {msgList &&\r\n          msgList.map((val, idx) => {\r\n            return (\r\n              <View\r\n                key={val.seq}\r\n                style={{\r\n                  flexDirection: \"row\",\r\n                  padding: 15,\r\n                }}\r\n              >\r\n                {loginUserNo === val.send_user ? (\r\n                  <View\r\n                    style={{\r\n                      flex: 1,\r\n                      flexDirection: \"row\",\r\n                      justifyContent: \"flex-end\",\r\n                    }}\r\n                  >\r\n                    <View\r\n                      style={{\r\n                        backgroundColor: \"#a5d6a7\",\r\n                        borderRadius: 12,\r\n                        marginRight: 12,\r\n                        padding: 12,\r\n                      }}\r\n                    >\r\n                      <Text\r\n                        style={{\r\n                          color: \"black\",\r\n                          flexWrap: \"wrap\",\r\n                          maxWidth: userWidth - 150,\r\n                        }}\r\n                      >\r\n                        {val.msg}\r\n                      </Text>\r\n                      {/* <Text>{timeForToday(val.reg_date)}</Text> */}\r\n                    </View>\r\n                    <Image\r\n                      style={{ width: 50, height: 50, borderRadius: 50 }}\r\n                      source={{\r\n                        uri: \"https://cloudfront-ap-northeast-1.images.arcpublishing.com/chosun/GRUY3S3TLKVUE5O2IR7OKFK4O4.jpg\",\r\n                      }}\r\n                      alt=\"게스트사진\"\r\n                    />\r\n                  </View>\r\n                ) : (\r\n                  <View\r\n                    style={{\r\n                      flex: 1,\r\n                      flexDirection: \"row\",\r\n                    }}\r\n                  >\r\n                    <Image\r\n                      style={{ width: 50, height: 50, borderRadius: 50 }}\r\n                      source={{\r\n                        uri: \"https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F2438573358070C1535\",\r\n                      }}\r\n                      alt=\"사장님사진\"\r\n                    />\r\n                    <View\r\n                      style={{\r\n                        backgroundColor: \"#424242\",\r\n                        borderRadius: 12,\r\n                        marginLeft: 12,\r\n                        padding: 12,\r\n                      }}\r\n                    >\r\n                      {val.img_uri == \"\" ? null : (\r\n                        <Image\r\n                          style={{\r\n                            width: userWidth - 150,\r\n                            height: userWidth - 150,\r\n                            marginBottom: 10,\r\n                          }}\r\n                          source={{ uri: val.img_uri }}\r\n                        />\r\n                      )}\r\n                      <Text\r\n                        style={{\r\n                          color: \"white\",\r\n                          flexWrap: \"wrap\",\r\n                          maxWidth: userWidth - 150,\r\n                        }}\r\n                      >\r\n                        {val.msg}\r\n                      </Text>\r\n                    </View>\r\n                  </View>\r\n                )}\r\n              </View>\r\n            );\r\n          })}\r\n      </ScrollView>\r\n      <View style={{ height: 60 }}></View>\r\n      <View\r\n        style={{\r\n          position: \"absolute\",\r\n          height: 60,\r\n          bottom: 0,\r\n          width: userWidth,\r\n          justifyContent: \"center\",\r\n          padding: 12,\r\n          backgroundColor: \"#424242\",\r\n        }}\r\n      >\r\n        <View style={{ flexDirection: \"row\" }}>\r\n          <TextInput\r\n            onChangeText={(text) => {\r\n              setInputMsg(text);\r\n            }}\r\n            ref={inputRef}\r\n            placeholder=\"메시지\"\r\n            value={inputMsg}\r\n            placeholderTextColor=\"#ffffff\"\r\n            fontSize={15}\r\n            style={{\r\n              color: \"white\",\r\n              width: userWidth - 70,\r\n            }}\r\n          ></TextInput>\r\n          <TouchableOpacity\r\n            onPress={saveMsg}\r\n            style={{\r\n              padding: 12,\r\n              backgroundColor: \"white\",\r\n              borderRadius: 6,\r\n            }}\r\n          >\r\n            <Text>전송</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </View>\r\n    </Con>\r\n  );\r\n};\r\n\r\nconst Stack = createStackNavigator();\r\n\r\nconst Chat = ({ route, navigation }) => {\r\n  const navigationState = navigation.getState();\r\n\r\n  useLayoutEffect(() => {\r\n    const isDetail =\r\n      navigationState?.routes[2]?.state?.index === 1 ? \"none\" : null;\r\n\r\n    navigation.setOptions({\r\n      tabBarStyle: { display: isDetail },\r\n    });\r\n  }, [navigationState]);\r\n\r\n  const config = {\r\n    animation: \"spring\",\r\n    config: {\r\n      stiffness: 1000,\r\n      damping: 500,\r\n      mass: 3,\r\n      overshootClamping: true,\r\n      restDisplacementThreshold: 0.01,\r\n      restSpeedThreshold: 0.01,\r\n    },\r\n  };\r\n\r\n  return (\r\n    <Stack.Navigator\r\n      screenOptions={{\r\n        headerShown: false,\r\n        cardStyleInterpolator: CardStyleInterpolators.forModalPresentationIOS,\r\n      }}\r\n    >\r\n      <Stack.Screen name=\"ChatList\" component={ChatList} />\r\n      <Stack.Screen\r\n        name=\"ChatDetail\"\r\n        options={{\r\n          transitionSpec: {\r\n            open: config,\r\n            close: config,\r\n          },\r\n        }}\r\n        component={ChatDetail}\r\n      />\r\n    </Stack.Navigator>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n"]},"metadata":{},"sourceType":"module"}
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _propTypes=_interopRequireDefault(require("prop-types"));var _toastify=_interopRequireDefault(require("../styles/toastify"));var _jsxFileName="/Users/dimitri/repositories/dimsolution/react-native-toastify/src/components/toastify.js";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2["default"])(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2["default"])(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}var _Dimensions$get=_reactNative.Dimensions.get('window'),height=_Dimensions$get.height;var Toastify=function(_Component){(0,_inherits2["default"])(Toastify,_Component);var _super=_createSuper(Toastify);function Toastify(props){var _this;(0,_classCallCheck2["default"])(this,Toastify);_this=_super.call(this,props);_this.state={isShow:false,text:'',opacityValue:new _reactNative.Animated.Value(_this.props.opacity)};return _this;}(0,_createClass2["default"])(Toastify,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.resetTimeout();}},{key:"show",value:function show(text,duration){var _this2=this;this.setState({isShow:true,text:text,duration:typeof duration==='number'?duration:this.props.durationShort});_reactNative.Animated.timing(this.state.opacityValue,{toValue:this.props.opacity,duration:this.props.fadeInDuration,useNativeDriver:false}).start(function(){_this2.isShow=true;if(duration!==_this2.props.end)_this2.close();});}},{key:"close",value:function close(duration){var _this3=this;var delay=typeof duration==='number'?duration:this.state.duration;if(delay===this.props.end)delay=this.props.defaultCloseDelay;if(!this.isShow&&!this.state.isShow)return;this.resetTimeout();this.timer=setTimeout(function(){return _reactNative.Animated.timing(_this3.state.opacityValue,{toValue:0.0,useNativeDriver:false,duration:_this3.props.fadeOutDuration}).start(function(){_this3.setState({isShow:false});_this3.isShow=false;});},delay);}},{key:"resetTimeout",value:function resetTimeout(){clearTimeout(this.timer);}},{key:"position",value:function position(){if(this.props.position==='top')return this.props.positionValue;if(this.props.position==='center')return height/2;return height-this.props.positionValue;}},{key:"render",value:function render(){return this.state.isShow?_react["default"].createElement(_reactNative.View,{style:[_toastify["default"].container,{top:this.position()}],pointerEvents:"none",__self:this,__source:{fileName:_jsxFileName,lineNumber:102,columnNumber:9}},_react["default"].createElement(_reactNative.Animated.View,{style:[_toastify["default"].content,{opacity:this.state.opacityValue},this.props.style],__self:this,__source:{fileName:_jsxFileName,lineNumber:103,columnNumber:11}},_react["default"].createElement(_reactNative.Text,{style:this.props.textStyle,__self:this,__source:{fileName:_jsxFileName,lineNumber:106,columnNumber:13}},this.state.text))):null;}}]);return Toastify;}(_react.Component);exports["default"]=Toastify;(0,_defineProperty2["default"])(Toastify,"propTypes",{style:_reactNative.ViewPropTypes.style,position:_propTypes["default"].oneOf(['top','center','bottom']),textStyle:_reactNative.Text.propTypes.style,positionValue:_propTypes["default"].number,fadeInDuration:_propTypes["default"].number,fadeOutDuration:_propTypes["default"].number,opacity:_propTypes["default"].number,durationShort:_propTypes["default"].number,defaultCloseDelay:_propTypes["default"].number,end:_propTypes["default"].number});(0,_defineProperty2["default"])(Toastify,"defaultProps",{style:{},position:'bottom',textStyle:_toastify["default"].text,positionValue:120,fadeInDuration:500,fadeOutDuration:500,opacity:1,durationShort:500,defaultCloseDelay:250,end:0});